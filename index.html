<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>ĞšĞ½Ğ¸Ğ³Ğ° Ğ¡ÑƒĞ´ÑŒĞ±Ñ‹</title>
<style>
body{background:#111;color:#fff;font-family:Arial;text-align:center;padding:20px}
#box{max-width:750px;margin:auto;border:2px solid #555;padding:20px}
button{padding:10px 16px;margin:6px;font-size:14px;cursor:pointer}
input{padding:8px;font-size:16px}
table{width:100%;border-collapse:collapse;margin-top:10px}
td,th{border:1px solid #555;padding:5px}
</style>
</head>
<body>

<div id="box">
<h1>ğŸ“˜ ĞšĞ½Ğ¸Ğ³Ğ° Ğ¡ÑƒĞ´ÑŒĞ±Ñ‹</h1>
<div id="content"></div>
</div>

<script>
const content=document.getElementById("content");

let name="",day=1;
let food,water,mind,pages;
let alive=false;

let flags={
readPage:false,
burnedPage:false,
crazy:false,
metTrader:false,
fastStart:false,
richPages:false
};

const endings=[
"Ğ¢Ñ‹ ÑÑ‚Ğ°Ğ» Ñ‡Ğ°ÑÑ‚ÑŒÑ ĞºĞ½Ğ¸Ğ³Ğ¸.",
"Ğ¢Ñ‹ Ğ¸ÑÑ‡ĞµĞ· Ğ¼ĞµĞ¶Ğ´Ñƒ ÑÑ‚Ñ€Ğ¾Ğº.",
"ĞšĞ½Ğ¸Ğ³Ğ° Ğ·Ğ°ĞºÑ€Ñ‹Ğ»Ğ°ÑÑŒ Ğ½Ğ°Ğ²ÑĞµĞ³Ğ´Ğ°.",
"Ğ¢Ñ‹ Ğ²Ñ‹Ğ¶Ğ¸Ğ», Ğ½Ğ¾ Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ğ»ÑÑ.",
"Ğ¢Ñ‹ ÑÑ‚Ğ°Ğ» Ğ³Ğ¾Ğ»Ğ¾ÑĞ¾Ğ¼ ĞºĞ½Ğ¸Ğ³Ğ¸.",
"Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ·Ğ°ĞºĞ¾Ğ½Ñ‡Ğ¸Ğ»Ğ°ÑÑŒ."
];

function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}

// ---------- LEADERBOARD ----------
function saveResult(){
let data=JSON.parse(localStorage.getItem("book_leaders")||"[]");
data.push({
name:name,
days:day,
pages:pages,
mind:mind
});
data.sort((a,b)=>b.days-a.days);
data=data.slice(0,10);
localStorage.setItem("book_leaders",JSON.stringify(data));
}

function leaderboard(){
let data=JSON.parse(localStorage.getItem("book_leaders")||"[]");
let html="<h3>ğŸ† Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° Ğ»Ğ¸Ğ´ĞµÑ€Ğ¾Ğ²</h3><table><tr><th>#</th><th>ĞĞ¸Ğº</th><th>Ğ”Ğ½Ğ¸</th><th>ğŸ“„</th><th>ğŸ˜µ</th></tr>";
data.forEach((p,i)=>{
html+=`<tr><td>${i+1}</td><td>${p.name}</td><td>${p.days}</td><td>${p.pages}</td><td>${p.mind}</td></tr>`;
});
html+="</table>";
return html;
}

// ---------- START ----------
function startScreen(){
alive=false;
content.innerHTML=`
<h3>ğŸ“œ Ğ˜Ğ½ÑÑ‚Ñ€ÑƒĞºÑ†Ğ¸Ñ</h3>
<p style="text-align:left">
Ğ¢Ñ‹ Ğ¾ĞºĞ°Ğ·Ğ°Ğ»ÑÑ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ Ğ·Ğ°Ğ³Ğ°Ğ´Ğ¾Ñ‡Ğ½Ğ¾Ğ¹ ĞºĞ½Ğ¸Ğ³Ğ¸.<br><br>
Ğ¡Ğ»ĞµĞ´Ğ¸ Ğ·Ğ° Ñ€ĞµÑÑƒÑ€ÑĞ°Ğ¼Ğ¸ Ğ¸ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸ÑĞ¼Ğ¸. ĞĞ½Ğ¸ ÑĞ²ÑĞ·Ğ°Ğ½Ñ‹.<br><br>
ğŸ“„ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ â€” ĞºĞ»ÑÑ‡ ĞºĞ¾ Ğ²ÑĞµĞ¼Ñƒ.
</p>
<hr>
<p>Ğ’Ğ²ĞµĞ´Ğ¸ Ğ½Ğ¸Ğº:</p>
<input id="nick"><br><br>
<button onclick="startGame()">ĞĞ°Ñ‡Ğ°Ñ‚ÑŒ</button>
${leaderboard()}
`;
}

function startGame(){
name=document.getElementById("nick").value||"Ğ‘ĞµĞ·Ñ‹Ğ¼ÑĞ½Ğ½Ñ‹Ğ¹";
day=1;
food=rand(5,10);
water=rand(5,10);
pages=rand(3,6);
mind=5;
alive=true;
flags={readPage:false,burnedPage:false,crazy:false,metTrader:false,fastStart:false,richPages:false};
nextEvent();
}

function stats(){
return `ğŸ“… Ğ”ĞµĞ½ÑŒ ${day}<br>ğŸ ${food} | ğŸ’§ ${water} | ğŸ˜µ ${mind} | ğŸ“„ ${pages}`;
}

// ---------- LOGIC ----------
function consume(){
if(day%2===0){food--;water--;}
if(food<0||water<0)return gameOver("Ğ“Ğ¾Ğ»Ğ¾Ğ´ Ğ¸Ğ»Ğ¸ Ğ¶Ğ°Ğ¶Ğ´Ğ°.");
if(mind<=0)return gameOver("Ğ¢Ñ‹ ÑĞ¾ÑˆÑ‘Ğ» Ñ ÑƒĞ¼Ğ°.");
if(mind<=2)flags.crazy=true;
if(pages>=10)flags.richPages=true;
}

function nextEvent(){
if(!alive)return;
consume();
if(!alive)return;

let events=[
eventNormal,
eventWater,
eventSleep,
eventRip,
eventDark,
eventSilence,
eventFoodCount,
eventWetPage,
eventMeditation,
eventTearMind
];

if(Math.random()<0.25)events.push(eventTrader);
if(flags.readPage && Math.random()<0.4)events.push(eventVoice);
if(flags.burnedPage && Math.random()<0.4)events.push(eventSmoke);
if(flags.crazy && Math.random()<0.4)events.push(eventHallucination);
if(flags.richPages && Math.random()<0.3)events.push(eventGreed);

events[rand(0,events.length-1)]();
}

function nextDay(){
day++;
nextEvent();
}

// ---------- EVENTS ----------
function eventNormal(){
render("Ğ¢Ñ‹ Ğ½Ğ°Ñ…Ğ¾Ğ´Ğ¸ÑˆÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ ĞºĞ½Ğ¸Ğ³Ğ¸.",[
{t:"ğŸ“– Ğ§Ğ¸Ñ‚Ğ°Ñ‚ÑŒ",a:()=>{mind++;pages++;flags.readPage=true;nextDay();}},
{t:"ğŸ”¥ Ğ¡Ğ¶ĞµÑ‡ÑŒ",a:()=>{food+=2;flags.burnedPage=true;nextDay();}},
{t:"ğŸ“„ ĞÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ",a:()=>{pages++;nextDay();}}
]);
}

function eventFoodCount(){
render("Ğ¢Ñ‹ Ğ¿ĞµÑ€ĞµÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑˆÑŒ ĞµĞ´Ñƒ.",[
{t:"ğŸ“„ 1 â†’ ğŸ 1",a:()=>{if(pages>=1){pages--;food+=1;}nextDay();}},
{t:"ğŸ“„ 2 â†’ ğŸ 2",a:()=>{if(pages>=2){pages-=2;food+=2;}nextDay();}},
{t:"ğŸ“„ 3 â†’ ğŸ 3",a:()=>{if(pages>=3){pages-=3;food+=3;}nextDay();}},
{t:"âŒ ĞĞ¸Ñ‡ĞµĞ³Ğ¾",a:()=>nextDay()}
]);
}

function eventMeditation(){
render("Ğ¢Ñ‹ ÑĞ¾ÑÑ€ĞµĞ´Ğ¾Ñ‚Ğ°Ñ‡Ğ¸Ğ²Ğ°ĞµÑˆÑŒÑÑ.",[
{t:"ğŸ§˜ ĞœĞµĞ´Ğ¸Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",a:()=>{mind++;water--;nextDay();}},
{t:"âŒ ĞŸÑ€ĞµÑ€Ğ²Ğ°Ñ‚ÑŒ",a:()=>nextDay()}
]);
}

function eventTearMind(){
render("ĞœÑ‹ÑĞ»Ğ¸ Ñ€Ğ²ÑƒÑ‚ Ñ‚ĞµĞ±Ñ.",[
{t:"ğŸ“„ ĞŸĞ¾Ñ‚Ñ€Ğ°Ñ‚Ğ¸Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ",a:()=>{if(pages>0){pages--;mind++;}nextDay();}},
{t:"ğŸ˜µ Ğ¢ĞµÑ€Ğ¿ĞµÑ‚ÑŒ",a:()=>{mind--;nextDay();}}
]);
}

function eventGreed(){
render("Ğ¢Ñ‹ Ñ‡ÑƒĞ²ÑÑ‚Ğ²ÑƒĞµÑˆÑŒ Ğ¶Ğ°Ğ´Ğ½Ğ¾ÑÑ‚ÑŒ.",[
{t:"ğŸ“„ ĞšĞ¾Ğ¿Ğ¸Ñ‚ÑŒ",a:()=>{mind--;nextDay();}},
{t:"ğŸ”¥ Ğ¡Ğ¶ĞµÑ‡ÑŒ Ğ»Ğ¸ÑˆĞ½ĞµĞµ",a:()=>{pages--;food++;nextDay();}}
]);
}

// ---------- OTHER EVENTS (ĞĞ• ĞœĞ•ĞĞ¯Ğ›) ----------
function eventWater(){render("ĞšĞ°Ğ¿Ğ°ĞµÑ‚ Ğ²Ğ¾Ğ´Ğ°.",[{t:"ğŸ’§ Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒ",a:()=>{water++;nextDay();}},{t:"âŒ Ğ˜Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ",a:()=>nextDay()}]);}
function eventSleep(){render("Ğ¢Ñ‹ ÑƒÑÑ‚Ğ°Ğ».",[{t:"ğŸ˜´ Ğ¡Ğ¿Ğ°Ñ‚ÑŒ",a:()=>{mind++;nextDay();}},{t:"ğŸ¤ª ĞĞµ ÑĞ¿Ğ°Ñ‚ÑŒ",a:()=>{mind--;nextDay();}}]);}
function eventRip(){render("Ğ¥Ğ¾Ñ‡ĞµÑ‚ÑÑ Ğ²Ñ‹Ñ€Ğ²Ğ°Ñ‚ÑŒ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñƒ.",[{t:"ğŸ“„ Ğ’Ñ‹Ñ€Ğ²Ğ°Ñ‚ÑŒ",a:()=>{pages++;food++;mind--;nextDay();}},{t:"âŒ ĞĞµ Ğ´ĞµĞ»Ğ°Ñ‚ÑŒ",a:()=>nextDay()}]);}
function eventDark(){render("Ğ¢ĞµĞ¼Ğ½Ğ¾Ñ‚Ğ° Ğ´Ğ°Ğ²Ğ¸Ñ‚.",[{t:"ğŸ˜± ĞŸĞ°Ğ½Ğ¸ĞºĞ¾Ğ²Ğ°Ñ‚ÑŒ",a:()=>{mind--;nextDay();}},{t:"ğŸ§˜ Ğ”ĞµÑ€Ğ¶Ğ°Ñ‚ÑŒÑÑ",a:()=>{mind++;nextDay();}}]);}
function eventSilence(){render("Ğ¢Ğ¸Ñ…Ğ¸Ğ¹ Ğ´ĞµĞ½ÑŒ.",[{t:"ğŸ˜´ ĞÑ‚Ğ´Ğ¾Ñ…Ğ½ÑƒÑ‚ÑŒ",a:()=>{mind++;nextDay();}},{t:"ğŸ“– Ğ§Ğ¸Ñ‚Ğ°Ñ‚ÑŒ",a:()=>{mind++;pages++;flags.readPage=true;nextDay();}}]);}
function eventWetPage(){
render("ğŸ“„ Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ½Ğ°Ğ¼Ğ¾ĞºĞ»Ğ°. Ğ•ÑĞ»Ğ¸ Ğ¾ÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑÑƒÑˆĞ¸Ñ‚ÑŒÑÑ â€” ÑÑ‚Ğ¾ Ñ€Ğ¸ÑĞº.",[
{t:"ğŸ’§ Ğ’Ñ‹Ğ¶Ğ°Ñ‚ÑŒ",a:()=>{
	if(pages>0){
		pages--;
		water++;
	}
	nextDay();
}},
{t:"â˜€ï¸ ĞÑÑ‚Ğ°Ğ²Ğ¸Ñ‚ÑŒ ÑÑƒÑˆĞ¸Ñ‚ÑŒÑÑ (Ñ€Ğ¸ÑĞº)",a:()=>{
	if(pages>0){
		if(Math.random()<0.4){
			pages--; // ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° Ğ¿Ñ€Ğ¾Ğ¿Ğ°Ğ»Ğ°
		}
		// Ğ¸Ğ½Ğ°Ñ‡Ğµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° ÑĞ¾Ñ…Ñ€Ğ°Ğ½Ğ¸Ğ»Ğ°ÑÑŒ
	}
	nextDay();
}}
]);
}
function eventTrader(){flags.metTrader=true;render("ğŸ§¥ Ğ¢Ñ€ĞµĞ¹Ğ´ĞµÑ€.",[{t:"ğŸ“„2 â†’ ğŸ1",a:()=>{if(pages>=2){pages-=2;food++;}nextDay();}},{t:"ğŸ“„2 â†’ ğŸ’§1",a:()=>{if(pages>=2){pages-=2;water++;}nextDay();}},{t:"âŒ Ğ£Ğ¹Ñ‚Ğ¸",a:()=>nextDay()}]);}
function eventVoice(){render("ğŸ“¢ ĞšĞ½Ğ¸Ğ³Ğ° ÑˆĞµĞ¿Ñ‡ĞµÑ‚.",[{t:"ğŸ‘‚ Ğ¡Ğ»ÑƒÑˆĞ°Ñ‚ÑŒ",a:()=>{mind--;nextDay();}},{t:"ğŸ“„ Ğ’Ñ‹Ñ€Ğ²Ğ°Ñ‚ÑŒ",a:()=>{pages++;nextDay();}}]);}
function eventSmoke(){render("ğŸ’¨ Ğ”Ñ‹Ğ¼.",[{t:"ğŸ˜· Ğ¢ĞµÑ€Ğ¿ĞµÑ‚ÑŒ",a:()=>{mind--;nextDay();}},{t:"ğŸšª ĞŸÑ€Ğ¾Ğ²ĞµÑ‚Ñ€Ğ¸Ñ‚ÑŒ",a:()=>{water++;nextDay();}}]);}
function eventHallucination(){render("ğŸ¤ª Ğ“Ğ°Ğ»Ğ»ÑÑ†Ğ¸Ğ½Ğ°Ñ†Ğ¸Ğ¸.",[{t:"ğŸ˜µ ĞŸĞ¾Ğ´Ğ´Ğ°Ñ‚ÑŒÑÑ",a:()=>{mind--;nextDay();}},{t:"ğŸ§  Ğ¡Ğ¾Ğ±Ñ€Ğ°Ñ‚ÑŒÑÑ",a:()=>{mind++;nextDay();}}]);}

// ---------- UI ----------
function render(text,buttons){
let html=`<p>${stats()}</p><p>${text}</p>`;
buttons.forEach(b=>{
html+=`<button onclick="${b.a.toString().replace('()=>','')}">${b.t}</button>`;
});
content.innerHTML=html;
}

function gameOver(reason){
alive=false;
saveResult();
content.innerHTML=`
<h2>ğŸ’€ ĞšĞĞĞ•Ğ¦</h2>
<p>${reason}</p>
<p>${endings[rand(0,endings.length-1)]}</p>
<p>Ğ¢Ñ‹ Ğ¿Ñ€Ğ¾Ğ¶Ğ¸Ğ» <b>${day}</b> Ğ´Ğ½ĞµĞ¹</p>
<button onclick="startScreen()">ğŸ” Ğ¡Ğ½Ğ¾Ğ²Ğ°</button>
${leaderboard()}
`;
}

startScreen();
</script>
</body>
</html>

