<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>–ö–Ω–∏–≥–∞ –°—É–¥—å–±—ã</title>
<style>
body{background:#111;color:#fff;font-family:Arial;text-align:center;padding:20px}
#box{max-width:750px;margin:auto;border:2px solid #555;padding:20px}
button{padding:10px 16px;margin:6px;font-size:14px;cursor:pointer}
input{padding:8px;font-size:16px}
table{width:100%;border-collapse:collapse;margin-top:10px}
td,th{border:1px solid #555;padding:5px}
</style>
</head>
<body>

<div id="box">
<h1>üìò –ö–Ω–∏–≥–∞ –°—É–¥—å–±—ã</h1>
<div id="content"></div>
</div>

<script>
const content=document.getElementById("content");

let name="",day=1;
let food,water,mind,pages;
let alive=false;

let flags={
readPage:false,
burnedPage:false,
crazy:false,
metTrader:false
};

const endings=[
"–¢—ã —Å—Ç–∞–ª —á–∞—Å—Ç—å—é –∫–Ω–∏–≥–∏.",
"–¢—ã –∏—Å—á–µ–∑ –º–µ–∂–¥—É —Å—Ç—Ä–æ–∫.",
"–ö–Ω–∏–≥–∞ –∑–∞–∫—Ä—ã–ª–∞—Å—å –Ω–∞–≤—Å–µ–≥–¥–∞.",
"–¢—ã –≤—ã–∂–∏–ª, –Ω–æ –∏–∑–º–µ–Ω–∏–ª—Å—è.",
"–¢—ã —Å—Ç–∞–ª –≥–æ–ª–æ—Å–æ–º –∫–Ω–∏–≥–∏.",
"–ò—Å—Ç–æ—Ä–∏—è –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å."
];

function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min}

// ---------- START ----------
function startScreen(){
alive=false;
content.innerHTML=`
<h3>üìú –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è</h3>
<p style="text-align:left">
–¢—ã –æ–∫–∞–∑–∞–ª—Å—è –≤–Ω—É—Ç—Ä–∏ –∑–∞–≥–∞–¥–æ—á–Ω–æ–π –∫–Ω–∏–≥–∏.<br><br>

<b>üìÖ –ö–∞–∂–¥—ã–π –¥–µ–Ω—å</b> —Ç—ã –¥–µ–ª–∞–µ—à—å –≤—ã–±–æ—Ä, –∏ –æ–Ω –≤–ª–∏—è–µ—Ç –Ω–∞ –≤—ã–∂–∏–≤–∞–Ω–∏–µ –∏ –∫–æ–Ω—Ü–æ–≤–∫—É.<br><br>

<b>–†–µ—Å—É—Ä—Å—ã:</b><br>
üçû <b>–ï–¥–∞</b> ‚Äî –µ—Å–ª–∏ –∑–∞–∫–æ–Ω—á–∏—Ç—Å—è, —Ç—ã –ø—Ä–æ–∏–≥—Ä–∞–µ—à—å.<br>
üíß <b>–í–æ–¥–∞</b> ‚Äî –±–µ–∑ –Ω–µ—ë —Ç–æ–∂–µ –Ω–µ –≤—ã–∂–∏—Ç—å.<br>
üòµ <b>–†–∞–∑—É–º</b> ‚Äî –µ—Å–ª–∏ —É–ø–∞–¥—ë—Ç –¥–æ 0, —Ç—ã —Å–æ–π–¥—ë—à—å —Å —É–º–∞.<br>
üìÑ <b>–°—Ç—Ä–∞–Ω–∏—Ü—ã</b> ‚Äî —Å–∞–º—ã–π —Ü–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å, –≤–ª–∏—è–µ—Ç –Ω–∞ —Å–æ–±—ã—Ç–∏—è.<br><br>

<b>‚ö†Ô∏è –°–æ–≤–µ—Ç—ã:</b>
<ul>
<li>–ù–µ —Ç—Ä–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—ã –±–µ–∑ –ø—Ä–∏—á–∏–Ω—ã</li>
<li>–°–ª–µ–¥–∏ –∑–∞ —Ä–∞–∑—É–º–æ–º ‚Äî –æ–Ω –≤–ª–∏—è–µ—Ç –Ω–∞ —Å—é–∂–µ—Ç</li>
<li>–ò–Ω–æ–≥–¥–∞ –ª—É—á—à–µ –Ω–∏—á–µ–≥–æ –Ω–µ –¥–µ–ª–∞—Ç—å</li>
<li>–ß—Ç–µ–Ω–∏–µ –∏ —Å–∂–∏–≥–∞–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü –º–µ–Ω—è—é—Ç —Ö–æ–¥ –∏—Å—Ç–æ—Ä–∏–∏</li>
</ul>

<b>üéØ –¶–µ–ª—å:</b> –ø—Ä–æ–∂–∏—Ç—å –∫–∞–∫ –º–æ–∂–Ω–æ –±–æ–ª—å—à–µ –¥–Ω–µ–π –∏ —É–∑–Ω–∞—Ç—å —Å–≤–æ—é –∫–æ–Ω—Ü–æ–≤–∫—É.
</p>

<hr>

<p>–í–≤–µ–¥–∏ –Ω–∏–∫:</p>
<input id="nick"><br><br>
<button onclick="startGame()">–ù–∞—á–∞—Ç—å</button>
`;
}

function startGame(){
name=document.getElementById("nick").value||"–ë–µ–∑—ã–º—è–Ω–Ω—ã–π";
day=1;
food=rand(5,10);
water=rand(5,10);
pages=rand(3,6);
mind=5;
alive=true;
flags={readPage:false,burnedPage:false,crazy:false,metTrader:false};
nextEvent();
}

function stats(){
return `üìÖ –î–µ–Ω—å ${day}<br>
üçû ${food} | üíß ${water} | üòµ ${mind} | üìÑ ${pages}`;
}

// ---------- LOGIC ----------
function consume(){
if(day%2===0){food--;water--;}
if(food<0||water<0)return gameOver("–ì–æ–ª–æ–¥ –∏–ª–∏ –∂–∞–∂–¥–∞.");
if(mind<=0)return gameOver("–¢—ã —Å–æ—à—ë–ª —Å —É–º–∞.");
if(mind<=2)flags.crazy=true;
}

function nextEvent(){
if(!alive)return;
consume();
if(!alive)return;

let events=[
eventNormal,
eventWater,
eventSleep,
eventRip,
eventDark,
eventSilence,
eventFoodCount,
eventWetPage
];

if(Math.random()<0.25 || flags.metTrader && Math.random()<0.4){
events.push(eventTrader);
}

if(flags.readPage && Math.random()<0.4)events.push(eventVoice);
if(flags.burnedPage && Math.random()<0.4)events.push(eventSmoke);
if(flags.crazy && Math.random()<0.4)events.push(eventHallucination);

events[rand(0,events.length-1)]();
}

function nextDay(){
if(!alive)return;
day++;
nextEvent();
}

// ---------- EVENTS ----------
function eventNormal(){
render("–¢—ã –Ω–∞—Ö–æ–¥–∏—à—å —Å—Ç—Ä–∞–Ω–∏—Ü—É –∫–Ω–∏–≥–∏.",[
{t:"üìñ –ß–∏—Ç–∞—Ç—å",a:()=>{mind++;pages++;flags.readPage=true;nextDay();}},
{t:"üî• –°–∂–µ—á—å",a:()=>{food+=2;flags.burnedPage=true;nextDay();}},
{t:"üìÑ –û—Å—Ç–∞–≤–∏—Ç—å",a:()=>{pages++;nextDay();}}
]);
}

function eventWater(){
render("–ö–∞–ø–∞–µ—Ç –≤–æ–¥–∞.",[
{t:"üíß –°–æ–±—Ä–∞—Ç—å",a:()=>{water++;nextDay();}},
{t:"‚ùå –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å",a:()=>nextDay()}
]);
}

function eventSleep(){
render("–¢—ã —É—Å—Ç–∞–ª.",[
{t:"üò¥ –°–ø–∞—Ç—å",a:()=>{mind++;nextDay();}},
{t:"ü§™ –ù–µ —Å–ø–∞—Ç—å",a:()=>{mind--;nextDay();}}
]);
}

function eventRip(){
render("–•–æ—á–µ—Ç—Å—è –≤—ã—Ä–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É.",[
{t:"üìÑ –í—ã—Ä–≤–∞—Ç—å",a:()=>{pages++;food++;mind--;nextDay();}},
{t:"‚ùå –ù–µ –¥–µ–ª–∞—Ç—å",a:()=>nextDay()}
]);
}

function eventDark(){
render("–¢–µ–º–Ω–æ—Ç–∞ –¥–∞–≤–∏—Ç.",[
{t:"üò± –ü–∞–Ω–∏–∫–æ–≤–∞—Ç—å",a:()=>{mind--;nextDay();}},
{t:"üßò –î–µ—Ä–∂–∞—Ç—å—Å—è",a:()=>{mind++;nextDay();}}
]);
}

function eventSilence(){
render("–¢–∏—Ö–∏–π –¥–µ–Ω—å.",[
{t:"üò¥ –û—Ç–¥–æ—Ö–Ω—É—Ç—å",a:()=>{mind++;nextDay();}},
{t:"üìñ –ß–∏—Ç–∞—Ç—å",a:()=>{mind++;pages++;flags.readPage=true;nextDay();}}
]);
}

// ---------- EXTRA EVENTS ----------
function eventFoodCount(){
render("–¢—ã –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—à—å –µ–¥—É.",[
{t:"üìÑ –ü–æ—Ç—Ä–∞—Ç–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É ‚Üí üçû +1",a:()=>{if(pages>0){pages--;food++;}nextDay();}},
{t:"‚ùå –ù–µ —Ä–∏—Å–∫–æ–≤–∞—Ç—å",a:()=>nextDay()}
]);
}

function eventWetPage(){
render("üìÑ –°—Ç—Ä–∞–Ω–∏—Ü–∞ –Ω–∞–º–æ–∫–ª–∞.",[
{t:"üíß –í—ã–∂–∞—Ç—å –≤–æ–¥—É",a:()=>{if(pages>0){pages--;water++;}nextDay();}},
{t:"üòê –û—Å—Ç–∞–≤–∏—Ç—å",a:()=>{if(pages>0){pages--;}nextDay();}}
]);
}

// ---------- TRADER ----------
function eventTrader(){
flags.metTrader=true;
render("üß• –¢—Ä–µ–π–¥–µ—Ä –ø—Ä–µ–¥–ª–∞–≥–∞–µ—Ç –æ–±–º–µ–Ω.",[
{t:"üìÑ 2 ‚Üí üçû +1",a:()=>{if(pages>=2){pages-=2;food++;}nextDay();}},
{t:"üìÑ 2 ‚Üí üíß +1",a:()=>{if(pages>=2){pages-=2;water++;}nextDay();}},
{t:"üìÑ 3 ‚Üí üòµ +1",a:()=>{if(pages>=3){pages-=3;mind++;}nextDay();}},
{t:"‚ùå –£–π—Ç–∏",a:()=>nextDay()}
]);
}

// ---------- CHAINS ----------
function eventVoice(){
render("üì¢ –ö–Ω–∏–≥–∞ —à–µ–ø—á–µ—Ç —Ç–µ–±–µ.",[
{t:"üëÇ –°–ª—É—à–∞—Ç—å",a:()=>{mind--;nextDay();}},
{t:"üìÑ –í—ã—Ä–≤–∞—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É",a:()=>{pages++;nextDay();}}
]);
}

function eventSmoke(){
render("üí® –î—ã–º –æ—Ç —Å—Ç—Ä–∞–Ω–∏—Ü.",[
{t:"üò∑ –¢–µ—Ä–ø–µ—Ç—å",a:()=>{mind--;nextDay();}},
{t:"üö™ –ü—Ä–æ–≤–µ—Ç—Ä–∏—Ç—å",a:()=>{water++;nextDay();}}
]);
}

function eventHallucination(){
render("ü§™ –ì–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏.",[
{t:"üòµ –ü–æ–¥–¥–∞—Ç—å—Å—è",a:()=>{mind--;nextDay();}},
{t:"üß† –°–æ–±—Ä–∞—Ç—å—Å—è",a:()=>{mind++;nextDay();}}
]);
}

// ---------- UI ----------
function render(text,buttons){
let html=`<p>${stats()}</p><p>${text}</p>`;
buttons.forEach(b=>{
html+=`<button onclick="${b.a.toString().replace('()=>','')}">${b.t}</button>`;
});
content.innerHTML=html;
}

function gameOver(reason){
if(!alive)return;
alive=false;
let end=endings[rand(0,endings.length-1)];
content.innerHTML=`
<h2>üíÄ –ö–û–ù–ï–¶</h2>
<p>${reason}</p>
<p>üìñ ${end}</p>
<p>–¢—ã –ø—Ä–æ–∂–∏–ª <b>${day}</b> –¥–Ω–µ–π</p>
<button onclick="startScreen()">üîÅ –ò–≥—Ä–∞—Ç—å —Å–Ω–æ–≤–∞</button>
`;
}

startScreen();
</script>

</body>
</html>
